<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Diagnostic · JETLS.jl</title><meta name="title" content="Diagnostic · JETLS.jl"/><meta property="og:title" content="Diagnostic · JETLS.jl"/><meta property="twitter:title" content="Diagnostic · JETLS.jl"/><meta name="description" content="Documentation for JETLS.jl."/><meta property="og:description" content="Documentation for JETLS.jl."/><meta property="twitter:description" content="Documentation for JETLS.jl."/><meta property="og:url" content="https://aviatesk.github.io/JETLS.jl/diagnostic/"/><meta property="twitter:url" content="https://aviatesk.github.io/JETLS.jl/diagnostic/"/><link rel="canonical" href="https://aviatesk.github.io/JETLS.jl/diagnostic/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script><link href="../assets/extras.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">JETLS.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Index</a></li><li class="is-active"><a class="tocitem" href>Diagnostic</a><ul class="internal"><li><a class="tocitem" href="#diagnostic/code"><span>Diagnostic codes</span></a></li><li><a class="tocitem" href="#diagnostic/severity"><span>Diagnostic severity levels</span></a></li><li><a class="tocitem" href="#diagnostic/reference"><span>Diagnostic reference</span></a></li><li><a class="tocitem" href="#diagnostic/configuring"><span>Configuring diagnostic</span></a></li></ul></li><li><a class="tocitem" href="../formatting/">Formatter integration</a></li><li><a class="tocitem" href="../testrunner/">TestRunner integration</a></li><li><a class="tocitem" href="../notebook/">Notebook support</a></li><li><a class="tocitem" href="../configuration/">Configuration</a></li><li><a class="tocitem" href="../launching/">Launching</a></li><li><a class="tocitem" href="../CHANGELOG/">CHANGELOG</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Diagnostic</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Diagnostic</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/aviatesk/JETLS.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/aviatesk/JETLS.jl/blob/master/docs/src/diagnostic.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="diagnostic"><a class="docs-heading-anchor" href="#diagnostic">Diagnostic</a><a id="diagnostic-1"></a><a class="docs-heading-anchor-permalink" href="#diagnostic" title="Permalink"></a></h1><p>JETLS reports various diagnostic messages (errors, warnings, hints) to help you catch potential issues in your Julia code. Each diagnostic has a unique code that identifies its category and type.</p><p>This document describes all available diagnostic codes, their meanings, default severity levels, and how to configure them to match your project&#39;s needs.</p><h2 id="diagnostic/code"><a class="docs-heading-anchor" href="#diagnostic/code">Diagnostic codes</a><a id="diagnostic/code-1"></a><a class="docs-heading-anchor-permalink" href="#diagnostic/code" title="Permalink"></a></h2><p>JETLS reports diagnostics using hierarchical codes in the format <code>&quot;category/kind&quot;</code>, following the <a href="https://microsoft.github.io/language-server-protocol/specifications/lsp/3.17/specification/#diagnostic">LSP specification</a>. This structure allows fine-grained control over which diagnostics to show and at what <a href="#diagnostic/severity">severity level</a> through configuration.</p><p>All available diagnostic codes are listed below. Each category (e.g., <code>syntax/*</code>, <code>lowering/*</code>) contains one or more specific diagnostic codes:</p><ul><li><a href="#diagnostic/reference/syntax">Syntax diagnostic (<code>syntax/*</code>)</a></li><li class="no-marker"><ul><li><a href="#diagnostic/reference/syntax/parse-error">Syntax parse error (<code>syntax/parse-error</code>)</a></li></ul></li><li><a href="#diagnostic/reference/lowering">Lowering diagnostic (<code>lowering/*</code>)</a></li><li class="no-marker"><ul><li><a href="#diagnostic/reference/lowering/error">Lowering error (<code>lowering/error</code>)</a></li><li><a href="#diagnostic/reference/lowering/macro-expansion-error">Macro expansion error (<code>lowering/macro-expansion-error</code>)</a></li><li><a href="#diagnostic/reference/lowering/unused-argument">Unused argument (<code>lowering/unused-argument</code>)</a></li><li><a href="#diagnostic/reference/lowering/unused-local">Unused local variable (<code>lowering/unused-local</code>)</a></li><li><a href="#diagnostic/reference/lowering/undef-global-var">Undefined global variable (<code>lowering/undef-global-var</code>)</a></li><li><a href="#diagnostic/reference/lowering/captured-boxed-variable">Captured boxed variable (<code>lowering/captured-boxed-variable</code>)</a></li></ul></li><li><a href="#diagnostic/reference/toplevel">Top-level diagnostic (<code>toplevel/*</code>)</a></li><li class="no-marker"><ul><li><a href="#diagnostic/reference/toplevel/error">Top-level error (<code>toplevel/error</code>)</a></li><li><a href="#diagnostic/reference/toplevel/method-overwrite">Method overwrite (<code>toplevel/method-overwrite</code>)</a></li><li><a href="#diagnostic/reference/toplevel/abstract-field">Abstract field type (<code>toplevel/abstract-field</code>)</a></li></ul></li><li><a href="#diagnostic/reference/inference">Inference diagnostic (<code>inference/*</code>)</a></li><li class="no-marker"><ul><li><a href="#diagnostic/reference/inference/undef-global-var">Undefined global variable (<code>inference/undef-global-var</code>)</a></li><li><a href="#diagnostic/reference/inference/undef-local-var">Undefined local variable (<code>inference/undef-local-var</code>)</a></li><li><a href="#diagnostic/reference/inference/field-error">Field error (<code>inference/field-error</code>)</a></li><li><a href="#diagnostic/reference/inference/bounds-error">Bounds error (<code>inference/bounds-error</code>)</a></li></ul></li><li><a href="#diagnostic/reference/testrunner">TestRunner diagnostic (<code>testrunner/*</code>)</a></li><li class="no-marker"><ul><li><a href="#diagnostic/reference/testrunner/test-failure">Test failure (<code>testrunner/test-failure</code>)</a></li></ul></li></ul><h2 id="diagnostic/severity"><a class="docs-heading-anchor" href="#diagnostic/severity">Diagnostic severity levels</a><a id="diagnostic/severity-1"></a><a class="docs-heading-anchor-permalink" href="#diagnostic/severity" title="Permalink"></a></h2><p>Each diagnostic has a severity level that indicates how serious the issue is. JETLS supports four severity levels defined by the <a href="https://microsoft.github.io/language-server-protocol/specifications/lsp/3.17/specification/#diagnosticSeverity">LSP specification</a>:</p><ul><li><strong><code>Error</code></strong> (<code>1</code>): Critical issues that prevent code from working correctly. Most LSP clients display these with red underlines and error markers.</li><li><strong><code>Warning</code></strong> (<code>2</code>): Potential problems that should be reviewed. Typically shown with yellow/orange underlines and warning markers.</li><li><strong><code>Information</code></strong> (<code>3</code>): Informational messages about code that may benefit from attention. Often displayed with blue underlines or subtle markers.</li><li><strong><code>Hint</code></strong> (<code>4</code>): Suggestions for improvements or best practices. Usually shown with the least intrusive visual indicators.</li></ul><p>How diagnostics are displayed depends on your LSP client (VS Code, Neovim, etc.), but most clients use color-coded underlines and gutter markers that correspond to these severity levels.</p><p>You can change the severity of any diagnostic by <a href="#diagnostic/configuring">configuring <code>diagnostic</code> section</a>. Additionally, JETLS supports disabling diagnostics entirely using the special severity value <code>&quot;off&quot;</code> (or <code>0</code>).</p><h2 id="diagnostic/reference"><a class="docs-heading-anchor" href="#diagnostic/reference">Diagnostic reference</a><a id="diagnostic/reference-1"></a><a class="docs-heading-anchor-permalink" href="#diagnostic/reference" title="Permalink"></a></h2><p>This section provides detailed explanations for each diagnostic code. For every diagnostic, you&#39;ll find:</p><ul><li>A description of what the diagnostic detects</li><li>Its default severity level</li><li>Code examples demonstrating when the diagnostic is reported</li><li>Example diagnostic messages (shown in code comments)</li></ul><p>Here is a summary table of the diagnostics explained in this section:</p><table><tr><th style="text-align: right">Code</th><th style="text-align: right">Default Severity</th><th style="text-align: right">Description</th></tr><tr><td style="text-align: right"><a href="#diagnostic/reference/syntax/parse-error"><code>syntax/parse-error</code></a></td><td style="text-align: right"><code>Error</code></td><td style="text-align: right">Syntax parsing errors detected by JuliaSyntax.jl</td></tr><tr><td style="text-align: right"><a href="#diagnostic/reference/lowering/error"><code>lowering/error</code></a></td><td style="text-align: right"><code>Error</code></td><td style="text-align: right">General lowering errors</td></tr><tr><td style="text-align: right"><a href="#diagnostic/reference/lowering/macro-expansion-error"><code>lowering/macro-expansion-error</code></a></td><td style="text-align: right"><code>Error</code></td><td style="text-align: right">Errors during macro expansion</td></tr><tr><td style="text-align: right"><a href="#diagnostic/reference/lowering/unused-argument"><code>lowering/unused-argument</code></a></td><td style="text-align: right"><code>Information</code></td><td style="text-align: right">Function arguments that are never used</td></tr><tr><td style="text-align: right"><a href="#diagnostic/reference/lowering/unused-local"><code>lowering/unused-local</code></a></td><td style="text-align: right"><code>Information</code></td><td style="text-align: right">Local variables that are assigned but never read</td></tr><tr><td style="text-align: right"><a href="#diagnostic/reference/lowering/undef-global-var"><code>lowering/undef-global-var</code></a></td><td style="text-align: right"><code>Warning</code></td><td style="text-align: right">References to undefined global variables (triggered on change)</td></tr><tr><td style="text-align: right"><a href="#diagnostic/reference/lowering/captured-boxed-variable"><code>lowering/captured-boxed-variable</code></a></td><td style="text-align: right"><code>Information</code></td><td style="text-align: right">Variables captured by closures that require boxing</td></tr><tr><td style="text-align: right"><a href="#diagnostic/reference/toplevel/error"><code>toplevel/error</code></a></td><td style="text-align: right"><code>Error</code></td><td style="text-align: right">Errors during code loading (missing deps, type failures, etc.)</td></tr><tr><td style="text-align: right"><a href="#diagnostic/reference/toplevel/method-overwrite"><code>toplevel/method-overwrite</code></a></td><td style="text-align: right"><code>Warning</code></td><td style="text-align: right">Method definitions that overwrite previously defined methods</td></tr><tr><td style="text-align: right"><a href="#diagnostic/reference/toplevel/abstract-field"><code>toplevel/abstract-field</code></a></td><td style="text-align: right"><code>Information</code></td><td style="text-align: right">Struct fields with abstract types</td></tr><tr><td style="text-align: right"><a href="#diagnostic/reference/inference/undef-global-var"><code>inference/undef-global-var</code></a></td><td style="text-align: right"><code>Warning</code></td><td style="text-align: right">References to undefined global variables (triggered on save)</td></tr><tr><td style="text-align: right"><a href="#diagnostic/reference/inference/undef-local-var"><code>inference/undef-local-var</code></a></td><td style="text-align: right"><code>Information/Warning</code></td><td style="text-align: right">References to undefined local variables</td></tr><tr><td style="text-align: right"><a href="#diagnostic/reference/inference/field-error"><code>inference/field-error</code></a></td><td style="text-align: right"><code>Warning</code></td><td style="text-align: right">Access to non-existent struct fields</td></tr><tr><td style="text-align: right"><a href="#diagnostic/reference/inference/bounds-error"><code>inference/bounds-error</code></a></td><td style="text-align: right"><code>Warning</code></td><td style="text-align: right">Out-of-bounds field access by index</td></tr><tr><td style="text-align: right"><a href="#diagnostic/reference/testrunner/test-failure"><code>testrunner/test-failure</code></a></td><td style="text-align: right"><code>Error</code></td><td style="text-align: right">Test failures from TestRunner integration</td></tr></table><h3 id="diagnostic/reference/syntax"><a class="docs-heading-anchor" href="#diagnostic/reference/syntax">Syntax diagnostic (<code>syntax/*</code>)</a><a id="diagnostic/reference/syntax-1"></a><a class="docs-heading-anchor-permalink" href="#diagnostic/reference/syntax" title="Permalink"></a></h3><h4 id="diagnostic/reference/syntax/parse-error"><a class="docs-heading-anchor" href="#diagnostic/reference/syntax/parse-error">Syntax parse error (<code>syntax/parse-error</code>)</a><a id="diagnostic/reference/syntax/parse-error-1"></a><a class="docs-heading-anchor-permalink" href="#diagnostic/reference/syntax/parse-error" title="Permalink"></a></h4><p><strong>Default severity:</strong> <code>Error</code></p><p>Syntax parsing errors detected by JuliaSyntax.jl. These indicate invalid Julia syntax that prevents the code from being parsed.</p><p>Example:</p><pre><code class="language-julia hljs">function parse_error(x)
    println(x  # Expected `)` or `,` (JETLS syntax/parse-error)
end</code></pre><h3 id="diagnostic/reference/lowering"><a class="docs-heading-anchor" href="#diagnostic/reference/lowering">Lowering diagnostic (<code>lowering/*</code>)</a><a id="diagnostic/reference/lowering-1"></a><a class="docs-heading-anchor-permalink" href="#diagnostic/reference/lowering" title="Permalink"></a></h3><p>Lowering diagnostic is detected during Julia&#39;s lowering phase, which transforms parsed syntax into a simpler intermediate representation.</p><h4 id="diagnostic/reference/lowering/error"><a class="docs-heading-anchor" href="#diagnostic/reference/lowering/error">Lowering error (<code>lowering/error</code>)</a><a id="diagnostic/reference/lowering/error-1"></a><a class="docs-heading-anchor-permalink" href="#diagnostic/reference/lowering/error" title="Permalink"></a></h4><p><strong>Default severity:</strong> <code>Error</code></p><p>General lowering errors that don&#39;t fit into more specific categories.</p><p>Example:</p><pre><code class="language-julia hljs">function lowering_error(x)
    $(x)  # `$` expression outside string or quote block (JETLS lowering/error)
end</code></pre><h4 id="diagnostic/reference/lowering/macro-expansion-error"><a class="docs-heading-anchor" href="#diagnostic/reference/lowering/macro-expansion-error">Macro expansion error (<code>lowering/macro-expansion-error</code>)</a><a id="diagnostic/reference/lowering/macro-expansion-error-1"></a><a class="docs-heading-anchor-permalink" href="#diagnostic/reference/lowering/macro-expansion-error" title="Permalink"></a></h4><p><strong>Default severity:</strong> <code>Error</code></p><p>Errors that occur when expanding macros during the lowering phase.</p><p>Example:</p><pre><code class="language-julia hljs">function macro_expand_error()
    @undefined_macro ex  # Macro name `@undefined_macro` not found (JETLS lowering/macro-expansion-error)
end</code></pre><p>Errors that occur during actual macro expansion are also reported:</p><pre><code class="language-julia hljs">macro myinline(ex)
    Meta.isexpr(ex, :function) || error(&quot;Expected long function definition&quot;)
    return :(@inline $ex)
end
@myinline callsin(x) = sin(x)  # Error expanding macro
                               # Expected long function definition (JETLS lowering/macro-expansion-error)</code></pre><h4 id="diagnostic/reference/lowering/unused-argument"><a class="docs-heading-anchor" href="#diagnostic/reference/lowering/unused-argument">Unused argument (<code>lowering/unused-argument</code>)</a><a id="diagnostic/reference/lowering/unused-argument-1"></a><a class="docs-heading-anchor-permalink" href="#diagnostic/reference/lowering/unused-argument" title="Permalink"></a></h4><p><strong>Default severity:</strong> <code>Information</code></p><p>Function arguments that are declared but never used in the function body.</p><p>By default, arguments with names starting with <code>_</code> are not reported; see <a href="../configuration/#config/diagnostic-allow_unused_underscore"><code>allow_unused_underscore</code></a>.</p><p>Example:</p><pre><code class="language-julia hljs">function unused_argument(x, y)  # Unused argument `y` (JETLS lowering/unused-argument)
    return x + 1
end</code></pre><h4 id="diagnostic/reference/lowering/unused-local"><a class="docs-heading-anchor" href="#diagnostic/reference/lowering/unused-local">Unused local variable (<code>lowering/unused-local</code>)</a><a id="diagnostic/reference/lowering/unused-local-1"></a><a class="docs-heading-anchor-permalink" href="#diagnostic/reference/lowering/unused-local" title="Permalink"></a></h4><p><strong>Default severity:</strong> <code>Information</code></p><p>Local variables that are assigned but never read.</p><p>By default, variables with names starting with <code>_</code> are not reported; see <a href="../configuration/#config/diagnostic-allow_unused_underscore"><code>allow_unused_underscore</code></a>.</p><p>Example:</p><pre><code class="language-julia hljs">function unused_local()
    x = 10  # Unused local binding `x` (JETLS lowering/unused-local)
    return println(10)
end</code></pre><h4 id="diagnostic/reference/lowering/undef-global-var"><a class="docs-heading-anchor" href="#diagnostic/reference/lowering/undef-global-var">Undefined global variable (<code>lowering/undef-global-var</code>)</a><a id="diagnostic/reference/lowering/undef-global-var-1"></a><a class="docs-heading-anchor-permalink" href="#diagnostic/reference/lowering/undef-global-var" title="Permalink"></a></h4><p><strong>Default severity:</strong> <code>Warning</code></p><p>References to undefined global variables, detected during lowering analysis. This diagnostic is reported on change (as you type), providing immediate feedback.</p><p>Example:</p><pre><code class="language-julia hljs">function undef_global_var()
    ret = sin(undefined_var)  # `Main.undefined_var` is not defined (JETLS lowering/undef-global-var)
    return ret
end</code></pre><p>This diagnostic detects simple undefined global variable references. For more comprehensive detection (including qualified references like <code>Base.undefvar</code>), see <a href="#diagnostic/reference/inference/undef-global-var"><code>inference/undef-global-var</code></a>, which runs on save.</p><h4 id="diagnostic/reference/lowering/captured-boxed-variable"><a class="docs-heading-anchor" href="#diagnostic/reference/lowering/captured-boxed-variable">Captured boxed variable (<code>lowering/captured-boxed-variable</code>)</a><a id="diagnostic/reference/lowering/captured-boxed-variable-1"></a><a class="docs-heading-anchor-permalink" href="#diagnostic/reference/lowering/captured-boxed-variable" title="Permalink"></a></h4><p><strong>Default severity:</strong> <code>Information</code></p><p>Reported when a variable is captured by a closure and requires &quot;boxing&quot; due to being assigned multiple times. Captured boxed variables are stored in heap-allocated containers (a.k.a. <code>Core.Box</code>), which can cause type instability and hinder compiler optimizations.<sup class="footnote-reference"><a id="citeref-perftip" href="#footnote-perftip" class="footnote-ref">[perftip]</a><span class="footnote-preview" id="fn-perftip"></span></sup></p><p>Example:</p><pre><code class="language-julia hljs">function captured_variable()
    x = 1           # `x` is captured and boxed (JETLS lowering/captured-boxed-variable)
    f = () -&gt;
        println(x)  # RelatedInformation: Closure at L3:9 captures `x`
    x = 2           # (`x` is reassigned after capture)
    return f
end</code></pre><p>The diagnostic includes <code>relatedInformation</code> showing where the variable is captured:</p><pre><code class="language-julia hljs">function multi_capture()
    x = 1               # `x` is captured and boxed (JETLS lowering/captured-boxed-variable)
    f = () -&gt;
        println(x)      # RelatedInformation: Closure at L3:9 captures `x`
    g = () -&gt;
        println(x + 1)  # RelatedInformation: Closure at L5:9 captures `x`
    x = 2
    return f, g
end</code></pre><p>Variables captured by closures but assigned only once before closure definition do not require boxing and are not reported:</p><pre><code class="language-julia hljs">function not_boxed()
    x = 1
    f = () -&gt; x  # OK: `x` is only assigned once
    return f
end</code></pre><div class="admonition is-success" id="Workaround-d9291b076db1c42c"><header class="admonition-header">Workaround<a class="admonition-anchor" href="#Workaround-d9291b076db1c42c" title="Permalink"></a></header><div class="admonition-body"><p>When you need to capture a variable that changes, consider using a <code>let</code> block:</p><pre><code class="language-julia hljs">function with_let()
    x = 1
    f = let x = x
        () -&gt; x  # Captures the value of `x` at this point
    end
    x = 2
    return f()  # Returns 1, not 2
end</code></pre><p>or mutable container like <code>Ref</code> to avoid direct assignment to the captured variable:</p><pre><code class="language-julia hljs">function with_mut()
    x = Ref(1)
    f = () -&gt; x[]
    x[] = 2
    return f()
end</code></pre></div></div><div class="admonition is-warning" id="Box-optimization-difference-from-the-flisp-lowerer-27e0deb3c46148e5"><header class="admonition-header">Box optimization difference from the flisp lowerer<a class="admonition-anchor" href="#Box-optimization-difference-from-the-flisp-lowerer-27e0deb3c46148e5" title="Permalink"></a></header><div class="admonition-body"><p>The generation of captured boxes is an implementation detail of the code lowerer (<a href="https://github.com/JuliaLang/julia/tree/master/JuliaLowering">JuliaLowering.jl</a>) used internally by JETLS, and the conditions under which captured boxes are created may change in the future. The control flow dominance analysis used for captured variable detection in the current JuliaLowering.jl is quite primitive, so captured boxes may occur even when programmers don&#39;t expect them. Also note that the cases where the flisp lowerer (a.k.a. <code>code_lowered</code>) generates <code>Core.Box</code> do not necessarily match the cases where JETLS reports captured boxes.</p></div></div><h3 id="diagnostic/reference/toplevel"><a class="docs-heading-anchor" href="#diagnostic/reference/toplevel">Top-level diagnostic (<code>toplevel/*</code>)</a><a id="diagnostic/reference/toplevel-1"></a><a class="docs-heading-anchor-permalink" href="#diagnostic/reference/toplevel" title="Permalink"></a></h3><p>Top-level diagnostic are reported by JETLS&#39;s full analysis feature, which runs when you save a file. To prevent excessive analysis on frequent saves, JETLS uses a debounce mechanism. See the <a href="../configuration/#config/full_analysis-debounce"><code>[full_analysis] debounce</code></a> configuration documentation to adjust the debounce period.</p><h4 id="diagnostic/reference/toplevel/error"><a class="docs-heading-anchor" href="#diagnostic/reference/toplevel/error">Top-level error (<code>toplevel/error</code>)</a><a id="diagnostic/reference/toplevel/error-1"></a><a class="docs-heading-anchor-permalink" href="#diagnostic/reference/toplevel/error" title="Permalink"></a></h4><p><strong>Default severity:</strong> <code>Error</code></p><p>Errors that occur when JETLS loads your code for analysis. This diagnostic is commonly reported in several scenarios:</p><ul><li>Missing package dependencies (the most frequent cause)</li><li>Type definition failures</li><li>References to undefined names at the top level</li><li>Other errors during module evaluation</li></ul><p>Examples:</p><pre><code class="language-julia hljs">struct ToplevelError  # UndefVarError: `Unexisting` not defined in `JETLS`
                      # Suggestion: check for spelling errors or missing imports. (JETLS toplevel/error)
    x::Unexisting
end

using UnexistingPkg  # Package JETLS does not have UnexistingPkg in its dependencies:
                     # - You may have a partially installed environment. Try `Pkg.instantiate()`
                     # to ensure all packages in the environment are installed.
                     # - Or, if you have JETLS checked out for development and have
                     # added UnexistingPkg as a dependency but haven&#39;t updated your primary
                     # environment&#39;s manifest file, try `Pkg.resolve()`.
                     # - Otherwise you may need to report an issue with JETLS (JETLS toplevel/error)</code></pre><p>These errors prevent JETLS from fully analyzing your code, which means <a href="#diagnostic/reference/inference">Inference diagnostic</a> will not be available until the top-level errors are resolved. To fix these errors, ensure your package environment is properly set up by running <code>Pkg.instantiate()</code> in your package directory, and verify that your package can be loaded successfully in a Julia REPL.</p><h4 id="diagnostic/reference/toplevel/method-overwrite"><a class="docs-heading-anchor" href="#diagnostic/reference/toplevel/method-overwrite">Method overwrite (<code>toplevel/method-overwrite</code>)</a><a id="diagnostic/reference/toplevel/method-overwrite-1"></a><a class="docs-heading-anchor-permalink" href="#diagnostic/reference/toplevel/method-overwrite" title="Permalink"></a></h4><p><strong>Default severity:</strong> <code>Warning</code></p><p>Reported when a method with the same signature is defined multiple times within a package. This typically indicates an unintentional redefinition that overwrites the previous method.</p><p>Example:</p><pre><code class="language-julia hljs">function duplicate(x::Int)
    return x + 1
end

function duplicate(x::Int, y::Int=2)  # Method definition duplicate(x::Int) in module MyPkg overwritten
                                      # (JETLS toplevel/method-overwrite)
    return x + y
end</code></pre><p>The diagnostic includes a link to the original definition location via <code>relatedInformation</code>, making it easy to navigate to the first definition.</p><h4 id="diagnostic/reference/toplevel/abstract-field"><a class="docs-heading-anchor" href="#diagnostic/reference/toplevel/abstract-field">Abstract field type (<code>toplevel/abstract-field</code>)</a><a id="diagnostic/reference/toplevel/abstract-field-1"></a><a class="docs-heading-anchor-permalink" href="#diagnostic/reference/toplevel/abstract-field" title="Permalink"></a></h4><p><strong>Default severity:</strong> <code>Information</code></p><p>Reported when a struct field has an abstract type, which can cause performance issues due to type instability. Storing values in abstractly-typed fields often prevents the compiler from generating optimized code.</p><p>Example:</p><pre><code class="language-julia hljs">struct MyStruct
    xs::Vector{Integer}  # `MyStruct` has abstract field `xs::Vector{Integer}`
                         # (JETLS toplevel/abstract-field)
end

struct AnotherStruct
    data::AbstractVector{Int}  # `AnotherStruct` has abstract field `data::AbstractVector{Int}`
                               # (JETLS toplevel/abstract-field)
end</code></pre><p>To fix this, use concrete types or parameterize your struct:</p><pre><code class="language-julia hljs">struct MyStruct
    xs::Vector{Int}  # Concrete element type
end

struct AnotherStruct{T&lt;:AbstractVector{Int}}
    data::T  # Parameterized field allows concrete types
end</code></pre><div class="admonition is-success" id="Tip-8837796de5366487"><header class="admonition-header">Tip<a class="admonition-anchor" href="#Tip-8837796de5366487" title="Permalink"></a></header><div class="admonition-body"><p>If you intentionally use abstract field types (e.g., in cases where data types are inherently only known at compile time<sup class="footnote-reference"><a id="citeref-nospecializetip" href="#footnote-nospecializetip" class="footnote-ref">[nospecializetip]</a><span class="footnote-preview" id="fn-nospecializetip"></span></sup>), you can suppress this diagnostic using <a href="../configuration/#config/diagnostic-patterns">pattern-based configuration</a>:</p><pre><code class="language-toml hljs">[[diagnostic.patterns]]
pattern = &quot;`MyStruct` has abstract field `.*`&quot;
match_by = &quot;message&quot;
match_type = &quot;regex&quot;
severity = &quot;off&quot;</code></pre></div></div><h3 id="diagnostic/reference/inference"><a class="docs-heading-anchor" href="#diagnostic/reference/inference">Inference diagnostic (<code>inference/*</code>)</a><a id="diagnostic/reference/inference-1"></a><a class="docs-heading-anchor-permalink" href="#diagnostic/reference/inference" title="Permalink"></a></h3><p>Inference diagnostic uses JET.jl to perform type-aware analysis and detect potential errors through static analysis. These diagnostics are reported by JETLS&#39;s full analysis feature, which runs when you save a file (similar to <a href="#diagnostic/reference/toplevel">Top-level diagnostic</a>).</p><h4 id="diagnostic/reference/inference/undef-global-var"><a class="docs-heading-anchor" href="#diagnostic/reference/inference/undef-global-var">Undefined global variable (<code>inference/undef-global-var</code>)</a><a id="diagnostic/reference/inference/undef-global-var-1"></a><a class="docs-heading-anchor-permalink" href="#diagnostic/reference/inference/undef-global-var" title="Permalink"></a></h4><p><strong>Default severity:</strong> <code>Warning</code></p><p>References to undefined global variables, detected through full analysis. This diagnostic runs on save and can detect comprehensive cases including qualified references (e.g., <code>Base.undefvar</code>). Position information is reported on a line basis.</p><p>Example:</p><pre><code class="language-julia hljs">function undef_global_var()
    return undefined_global  # `undefined_global` is not defined (JETLS inference/undef-global-var)
end</code></pre><p>For faster feedback while editing, see <a href="#diagnostic/reference/lowering/undef-global-var"><code>lowering/undef-global-var</code></a>, which reports a subset of undefined variable cases on change with accurate position information.</p><h4 id="diagnostic/reference/inference/undef-local-var"><a class="docs-heading-anchor" href="#diagnostic/reference/inference/undef-local-var">Undefined local variable (<code>inference/undef-local-var</code>)</a><a id="diagnostic/reference/inference/undef-local-var-1"></a><a class="docs-heading-anchor-permalink" href="#diagnostic/reference/inference/undef-local-var" title="Permalink"></a></h4><p><strong>Default severity:</strong> <code>Information</code> or <code>Warning</code></p><p>References to undefined local variables. The severity depends on whether the variable is definitely undefined (<code>Warning</code>) or only possibly undefined (<code>Information</code>).</p><p>Example:</p><pre><code class="language-julia hljs">function undef_local_var()
    if rand() &gt; 0.5
        x = 1
    end
    return x  # local variable `x` may be undefined (JETLS inference/undef-local-var)
end</code></pre><h4 id="diagnostic/reference/inference/field-error"><a class="docs-heading-anchor" href="#diagnostic/reference/inference/field-error">Field error (<code>inference/field-error</code>)</a><a id="diagnostic/reference/inference/field-error-1"></a><a class="docs-heading-anchor-permalink" href="#diagnostic/reference/inference/field-error" title="Permalink"></a></h4><p><strong>Default severity:</strong> <code>Warning</code></p><p>Access to non-existent struct fields. This diagnostic is reported when code attempts to access a field that doesn&#39;t exist on a struct type.</p><p>Example:</p><pre><code class="language-julia hljs">struct MyStruct
    property::Int
end
function field_error()
    x = MyStruct(42)
    return x.propert  # FieldError: type MyStruct has no field `propert`, available fields: `property` (JETLS inference/field-error)
end</code></pre><h4 id="diagnostic/reference/inference/bounds-error"><a class="docs-heading-anchor" href="#diagnostic/reference/inference/bounds-error">Bounds error (<code>inference/bounds-error</code>)</a><a id="diagnostic/reference/inference/bounds-error-1"></a><a class="docs-heading-anchor-permalink" href="#diagnostic/reference/inference/bounds-error" title="Permalink"></a></h4><p><strong>Default severity:</strong> <code>Warning</code></p><p>Out-of-bounds field access by index. This diagnostic is reported when code attempts to access a struct field using an integer index that is out of bounds, such as <code>getfield(x, i)</code> or tuple indexing <code>tpl[i]</code>.</p><div class="admonition is-info" id="Note-4f50750db2c48ddc"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-4f50750db2c48ddc" title="Permalink"></a></header><div class="admonition-body"><p>This diagnostic is not reported for arrays, since the compiler doesn&#39;t track array shape information.</p></div></div><p>Example:</p><pre><code class="language-julia hljs">function bounds_error(tpl::Tuple{Int})
    return tpl[2]  # BoundsError: attempt to access Tuple{Int64} at index [2] (JETLS inference/bounds-error)
end</code></pre><h3 id="diagnostic/reference/testrunner"><a class="docs-heading-anchor" href="#diagnostic/reference/testrunner">TestRunner diagnostic (<code>testrunner/*</code>)</a><a id="diagnostic/reference/testrunner-1"></a><a class="docs-heading-anchor-permalink" href="#diagnostic/reference/testrunner" title="Permalink"></a></h3><h4 id="diagnostic/reference/testrunner/test-failure"><a class="docs-heading-anchor" href="#diagnostic/reference/testrunner/test-failure">Test failure (<code>testrunner/test-failure</code>)</a><a id="diagnostic/reference/testrunner/test-failure-1"></a><a class="docs-heading-anchor-permalink" href="#diagnostic/reference/testrunner/test-failure" title="Permalink"></a></h4><p><strong>Default severity:</strong> <code>Error</code></p><p>Test failures reported by <a href="../testrunner/#TestRunner-integration">TestRunner integration</a> that happened during running individual <code>@testset</code> blocks or <code>@test</code> cases.</p><h2 id="diagnostic/configuring"><a class="docs-heading-anchor" href="#diagnostic/configuring">Configuring diagnostic</a><a id="diagnostic/configuring-1"></a><a class="docs-heading-anchor-permalink" href="#diagnostic/configuring" title="Permalink"></a></h2><p>You can configure which diagnostics are shown and at what <a href="#diagnostic/severity">severity level</a> under the <code>[diagnostic]</code> section. This allows you to customize JETLS&#39;s behavior to match your project&#39;s coding standards and preferences.</p><h5 id="diagnostic/configuring/common-use-cases"><a class="docs-heading-anchor" href="#diagnostic/configuring/common-use-cases">Common use cases</a><a id="diagnostic/configuring/common-use-cases-1"></a><a class="docs-heading-anchor-permalink" href="#diagnostic/configuring/common-use-cases" title="Permalink"></a></h5><p>Suppress specific macro expansion errors:</p><pre><code class="language-toml hljs">[[diagnostic.patterns]]
pattern = &quot;Macro name `MyPkg.@mymacro` not found&quot;
match_by = &quot;message&quot;
match_type = &quot;literal&quot;
severity = &quot;off&quot;</code></pre><p>Apply different settings for test files:</p><pre><code class="language-toml hljs"># Downgrade unused arguments to hints in test files
[[diagnostic.patterns]]
pattern = &quot;lowering/unused-argument&quot;
match_by = &quot;code&quot;
match_type = &quot;literal&quot;
severity = &quot;hint&quot;
path = &quot;test/**/*.jl&quot;

# Disable all diagnostics for generated code
[[diagnostic.patterns]]
pattern = &quot;.*&quot;
match_by = &quot;code&quot;
match_type = &quot;regex&quot;
severity = &quot;off&quot;
path = &quot;gen/**/*.jl&quot;</code></pre><p>Disable unused variable warnings during prototyping:</p><pre><code class="language-toml hljs">[[diagnostic.patterns]]
pattern = &quot;lowering/(unused-argument|unused-local)&quot;
match_by = &quot;code&quot;
match_type = &quot;regex&quot;
severity = &quot;off&quot;</code></pre><p>Make inference diagnostic less intrusive:</p><pre><code class="language-toml hljs">[[diagnostic.patterns]]
pattern = &quot;inference/.*&quot;
match_by = &quot;code&quot;
match_type = &quot;regex&quot;
severity = &quot;hint&quot;</code></pre><p>For complete configuration options, severity values, pattern matching syntax, and more examples, see the <a href="../configuration/#config/diagnostic"><code>[diagnostic]</code> configuration</a> section in the <a href="../configuration/#JETLS-configuration">JETLS configuration</a> page.</p><section class="footnotes is-size-7"><ul><li class="footnote" id="footnote-perftip"><a class="tag is-link" href="#citeref-perftip">perftip</a>For detailed information about how captured variables affect performance, see Julia&#39;s <a href="https://docs.julialang.org/en/v1/manual/performance-tips/#man-performance-captured">Performance Tips on captured variables</a>.</li><li class="footnote" id="footnote-nospecializetip"><a class="tag is-link" href="#citeref-nospecializetip">nospecializetip</a>For such cases, you can add <code>@nospecialize</code> to the use-site methods to allow them to handle abstract data types while avoiding excessive compilation.</li></ul></section></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Index</a><a class="docs-footer-nextpage" href="../formatting/">Formatter integration »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.16.1 on <span class="colophon-date" title="Saturday 10 January 2026 11:34">Saturday 10 January 2026</span>. Using Julia version 1.12.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
